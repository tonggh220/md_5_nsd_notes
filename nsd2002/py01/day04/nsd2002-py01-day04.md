# nsd2002-py01-day04

[TOC]

## 系统管理模块

### shutil模块

- https://docs.python.org/zh-cn/3/library/shutil.html
- 用于复制、移动文件和目录

```python
>>> import shutil
>>> f1 = open('/etc/hosts', 'rb')
>>> f2 = open('/tmp/zhuji', 'wb')
>>> shutil.copyfileobj(f1, f2)
>>> f1.close()
>>> f2.close()

>>> shutil.copy('/etc/passwd', '/tmp/password')  # 拷文件
'/tmp/password'
>>> shutil.copytree('/etc/security', '/tmp/anquan')  # 拷目录
'/tmp/anquan'
>>> shutil.move('/tmp/anquan', '/var/tmp')  # 移动文件或目录均可
'/var/tmp/anquan'
>>> shutil.rmtree('/var/tmp/anquan')  # 删目录
>>> shutil.chown('/tmp/zhuji', user='student', group='student')  # 改属主属组
```

### subprocess模块

- 用于执行系统命令
- https://docs.python.org/zh-cn/3/library/subprocess.html

```python
>>> import subprocess
>>> result = subprocess.run('ls ~', shell=True, stdout=subprocess.PIPE)
>>> result
CompletedProcess(args='ls ~', returncode=0, stdout=b'anaconda-ks.cfg\nbin\ncore.2469\ndocker_gitlab\ninitial-setup-ks.cfg\nlive.pptx\nnsd2020\npycharm2020\nPycharmProjects\nsoftware\n\xe7\xac\xac\xe4\xba\x94\xe9\x98\xb6\xe6\xae\xb5\xe5\xbc\x80\xe7\x8f\xad.pptx\n\xe5\x85\xac\xe5\x85\xb1\n\xe6\xa8\xa1\xe6\x9d\xbf\n\xe8\xa7\x86\xe9\xa2\x91\n\xe5\x9b\xbe\xe7\x89\x87\n\xe6\x96\x87\xe6\xa1\xa3\n\xe4\xb8\x8b\xe8\xbd\xbd\n\xe9\x9f\xb3\xe4\xb9\x90\n\xe6\xa1\x8c\xe9\x9d\xa2\n')
>>> result.args
'ls ~'
>>> result.returncode  # 即$?
0
>>> result.stdout
b'anaconda-ks.cfg\nbin\ncore.2469\ndocker_gitlab\ninitial-setup-ks.cfg\nlive.pptx\nnsd2020\npycharm2020\nPycharmProjects\nsoftware\n\xe7\xac\xac\xe4\xba\x94\xe9\x98\xb6\xe6\xae\xb5\xe5\xbc\x80\xe7\x8f\xad.pptx\n\xe5\x85\xac\xe5\x85\xb1\n\xe6\xa8\xa1\xe6\x9d\xbf\n\xe8\xa7\x86\xe9\xa2\x91\n\xe5\x9b\xbe\xe7\x89\x87\n\xe6\x96\x87\xe6\xa1\xa3\n\xe4\xb8\x8b\xe8\xbd\xbd\n\xe9\x9f\xb3\xe4\xb9\x90\n\xe6\xa1\x8c\xe9\x9d\xa2\n'
>>> result.stdout.decode()  # bytes转str
'anaconda-ks.cfg\nbin\ncore.2469\ndocker_gitlab\ninitial-setup-ks.cfg\nlive.pptx\nnsd2020\npycharm2020\nPycharmProjects\nsoftware\n第五阶段开班.pptx\n公共\n模板\n视频\n图片\n文档\n下载\n音乐\n桌面\n'
>>> print(result.stdout.decode())
```





