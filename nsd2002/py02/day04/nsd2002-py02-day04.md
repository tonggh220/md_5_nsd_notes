# nsd2002-py02-day04

[TOC]

## 复杂列表的排序

```python
>>> ips = {'172.40.58.150': 10, '172.40.58.124': 6, '172.40.58.101': 10, '127.0.0.1': 121, '192.168.4.254': 103, '192.168.2.254': 110, '201.1.1.254': 173, '201.1.2.254': 119, '172.40.0.54': 391, '172.40.50.116': 244}
>>> l1 = list(ips.items())
>>> l1
[('172.40.58.150', 10), ('172.40.58.124', 6), ('172.40.58.101', 10), ('127.0.0.1', 121), ('192.168.4.254', 103), ('192.168.2.254', 110), ('201.1.1.254', 173), ('201.1.2.254', 119), ('172.40.0.54', 391), ('172.40.50.116', 244)]

# 列表的sort方法接受一个名为key的参数，key应该对应一个函数。这个函数作用于列表的每一项，它将列表项的处理结果作为排序依据
>>> def func1(seq):
...   return seq[-1]
>>> l1.sort(key=func1)
>>> l1
[('172.40.58.124', 6), ('172.40.58.101', 10), ('172.40.58.150', 10), ('192.168.4.254', 103), ('192.168.2.254', 110), ('201.1.2.254', 119), ('127.0.0.1', 121), ('201.1.1.254', 173), ('172.40.50.116', 244), ('172.40.0.54', 391)]

# 匿名函数、降序排列
>>> l1.sort(key=lambda seq: seq[-1], reverse=True)
>>> l1
[('172.40.0.54', 391), ('172.40.50.116', 244), ('201.1.1.254', 173), ('127.0.0.1', 121), ('201.1.2.254', 119), ('192.168.2.254', 110), ('192.168.4.254', 103), ('172.40.58.101', 10), ('172.40.58.150', 10), ('172.40.58.124', 6)]
```

## 安装python包

- python相关的软件包数量庞大，python标准包没有包括全部可用的包
- python官方支持的软件包站点：https://pypi.org/
- 安装python包可以使用pip。yum用于安装rpm包，pip用于安装python包
- pip可以在线安装装软件包，也可以安装本地包
- 在线安装时，默认将会到pypi官方站点安装，速度慢。
- 配置使用国内镜像站点安装python包

```python
[root@localhost nsd2020]# mkdir ~/.pip
[root@localhost nsd2020]# vim ~/.pip/pip.conf
[global]
index-url = http://mirrors.aliyun.com/pypi/simple/
[install]
trusted-host=mirrors.aliyun.com

# 在线安装wget / pymysql
[root@localhost nsd2020]# pip3 install wget
[root@localhost nsd2020]# pip3 install pymysql
```

- 本地安装python包。需事先在http://pypi.org上下载

```python
# 本地安装pymysql
[root@localhost software]# tar xf zzg_pypkgs.tar.gz 
[root@localhost software]# cd zzg_pypkgs/
[root@localhost zzg_pypkgs]# pip3 install pymysql_pkgs/* pymysql_pkgs/*.tar.gz
```

- 查看安装的额外的包

```python
[root@localhost ~]# pip3 freeze
asn1crypto==0.24.0
cffi==1.11.5
cryptography==2.4.2
idna==2.7
pycparser==2.19
PyMySQL==0.9.2
six==1.11.0
wget==3.2	
```

## pymysql应用

- 安装mariadb-server或mysql-server

```shell
[root@localhost ~]# yum install -y mariadb-server
[root@localhost ~]# systemctl start mariadb
[root@localhost ~]# systemctl enable mariadb
[root@localhost ~]# mysqladmin password tedu.cn
```

