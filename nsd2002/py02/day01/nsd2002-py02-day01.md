# nsd2002-py02-day01

[TOC]

## 时间

### time模块

https://docs.python.org/zh-cn/3/library/time.html

#### time模块表示时间的方法

- 时间戳：表示的是从1970年1月1日`00:00:00`开始按秒计算的偏移量
- UTC时间：世界协调时。
- struct_time：9元组表示的时间(年、月、日、时、分、秒、一周中的第几天，一年中的第几天，是否使用夏季节约时间)。注意：一周中的第几天，周一为0

```python
>>> time.time()   # 返回当前时间的时间戳
1595295141.8331285
>>> time.ctime()  # 返回当前时间的UTC时间字符串
'Tue Jul 21 09:33:11 2020'
>>> t1 = time.localtime()  # 返回当前时间的9元组时间
>>> t1
time.struct_time(tm_year=2020, tm_mon=7, tm_mday=21, tm_hour=9, tm_min=33, tm_sec=53, tm_wday=1, tm_yday=203, tm_isdst=0)
>>> t1.tm_year
2020
>>> t1.tm_yday
203

>>> time.sleep(3)   # 睡眠3秒
# 将当前时间转成指定的字符串
>>> time.strftime('%Y-%m-%d %a %H:%M:%S')
'2020-07-21 Tue 09:42:26'
# 将时间转成9元组格式
>>> t2 = time.strptime('2018-05-01 12:00:00', '%Y-%m-%d %H:%M:%S')
>>> t2
time.struct_time(tm_year=2018, tm_mon=5, tm_mday=1, tm_hour=12, tm_min=0, tm_sec=0, tm_wday=1, tm_yday=121, tm_isdst=-1)
>>> t1 > t2
True
```

### datetime模块

```python
>>> import datetime  # 直接导入
>>> datetime.datetime.now()
datetime.datetime(2020, 7, 21, 10, 45, 31, 847952)

>>> from datetime import datetime   # 导入方法二
>>> t1 = datetime.now()  # 得到当前时间的对象
>>> t1  # 得到年月日时分秒毫秒
datetime.datetime(2020, 7, 21, 10, 47, 32, 630801)
>>> t1.year, t1.month, t1.day, t1.hour, t1.minute, t1.second, t1.microsecond
(2020, 7, 21, 10, 47, 32, 630801)
>>> t1.strftime('%Y/%m/%d %H:%M:%S')  # 转成字符串形式的时间
'2020/07/21 10:47:32'
# 将字符串转成datetime对象
>>> datetime.strptime('2020/07/20 09:30:00', '%Y/%m/%d %H:%M:%S')
datetime.datetime(2020, 7, 20, 9, 30)

# 计算时间差额
>>> from datetime import datetime, timedelta
>>> t1 = datetime.now()
>>> days = timedelta(days=100, hours=1)  # 100天零1小时
>>> t1
datetime.datetime(2020, 7, 21, 11, 14, 6, 734880)
>>> t1 - days  # 100天零1小时之前的时间
datetime.datetime(2020, 4, 12, 10, 14, 6, 734880)
>>> t1 + days  # 100天零1小时之后的时间
datetime.datetime(2020, 10, 29, 12, 14, 6, 734880)
```

## 异常处理

- 程序在运行时，如果遇到错误，它将会崩溃，终止执行。
- 异常处理就是要捕获这些问题，并给出补救代码。
- 语法

```python
try:
    有可能发生异常的语句
except 异常1:
    发生异常1执行的语句
except 异常2:
    发生异常2执行的语句
except 异常3 as e:  # 将异常保存为变量e
    发生异常3执行的语句
... ...
else:
    不发生异常才执行的语句
finally:
    不管异常是否发生，都要执行的语句
```

#### 触发异常

- 通过raise抛出指定的异常
- 通过assert抛出断言异常AssertionError

## os模块

- 对文件系统的访问大多通过python的os模块实现
- 有些方法，如copy等，并没有提供，可以使用shutil模块作为补充

```python
>>> import os
>>> os.getcwd()  # 返回当前工作目录
'/root/nsd2020/nsd2002/py02/day01'
>>> os.mkdir('/tmp/nsd2002')  # mkdir /tmp/nsd2002
>>> os.makedirs('/tmp/demo/nsd2002')  # mkdir -p /tmp/demo/nsd2002
>>> os.listdir()  # ls
>>> os.listdir('/tmp/demo')  # ls /tmp/demo
['nsd2002']
>>> os.chdir('/tmp/demo')  # cd /tmp/demo
>>> os.getcwd()   # pwd
'/tmp/demo'

>>> import shutil
>>> shutil.copy('/etc/hosts', 'hosts')
'hosts'
>>> os.listdir()
['nsd2002', 'hosts']
>>> os.symlink('/etc/hosts', 'zhuji')  # ln -s /etc/hosts zhuji
>>> os.mknod('myfile.txt')  # touch myfile.txt
>>> os.chmod('hosts', 0o755)  # chmod 755 hosts
>>> os.rename('hosts', 'servers')  # mv hosts servers
>>> os.remove('servers')  # rm servers
>>> os.rmdir('/tmp/demo/nsd2002')  # rmdir /tmp/demo/nsd2002  只能删空目录
>>> shutil.rmtree('/tmp/nsd2002')

>>> os.path.isabs('/a/b/c')  # 判断是否为绝对路径
True
>>> os.path.isdir('/etc')   # 存在并且是目录吗？
True
>>> os.path.isfile('/etc/hosts')  # 存在并且是文件吗？
True
>>> os.path.islink('/etc/grub2.cfg')  # 存在并且是软链接吗？
True
>>> os.path.ismount('/home')  # 存在并且是挂载点吗？
True
>>> os.path.exists('/home')   # 存在吗？
True

>>> os.path.basename('/tmp/demo/nsd2002/a.txt')  # 返回最右面/右侧内容
'a.txt'
>>> os.path.dirname('/tmp/demo/nsd2002/a.txt')   # 返回最右面/左侧内容
'/tmp/demo/nsd2002'
>>> os.path.split('/tmp/demo/nsd2002/a.txt')  # 返回元组
('/tmp/demo/nsd2002', 'a.txt')
>>> os.path.join('/tmp/demo/nsd2002', 'a.txt')  # 路径拼接
'/tmp/demo/nsd2002/a.txt'
```



